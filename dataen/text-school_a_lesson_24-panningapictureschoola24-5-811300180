This can be programmed using a lot of right arrow blocks like this.