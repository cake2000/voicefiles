you could find some similar logic in the getCallShot function,