Now we can optimize the solution with dynamic programming. 