add this piece of code at the beginning to handle the special case of empty arrays. 