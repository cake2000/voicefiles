Now this code has a bug.