You can implement the one pass swapping like this. 