First, for the get end state distance function,