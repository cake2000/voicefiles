We have introduced a function for doing such calculations before.