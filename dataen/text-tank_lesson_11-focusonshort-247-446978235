you need to add one more check in the attack opponent function: