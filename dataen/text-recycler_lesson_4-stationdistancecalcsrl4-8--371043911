Here is an example implementation.