For extra credit, let's try to improve the "get end state distance" function.