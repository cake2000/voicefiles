Can you think about how to implement this "getLegal Ball IDs" function?