Here is the correct program after removing the bug.