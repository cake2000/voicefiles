It's also using 2 library functions I provide: is Path blocked and extrapolatePoints.