This is the full solution for Challenge 6.