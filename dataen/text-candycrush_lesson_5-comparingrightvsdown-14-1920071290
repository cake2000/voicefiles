Please complete this logic in the main loop.