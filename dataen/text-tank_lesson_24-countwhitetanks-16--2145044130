There are two forloops in this logic flow, one nested in the other. 